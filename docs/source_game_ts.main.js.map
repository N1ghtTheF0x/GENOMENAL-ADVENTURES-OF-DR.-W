{"version":3,"file":"source_game_ts.main.js","mappings":"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","sources":["webpack://@igem/gaofw/./source/game.ts","webpack://@igem/gaofw/./source/graphics/canvas.ts","webpack://@igem/gaofw/./source/graphics/item.ts","webpack://@igem/gaofw/./source/input.ts","webpack://@igem/gaofw/./source/math.ts","webpack://@igem/gaofw/./source/state.ts"],"sourcesContent":["import Canvas from \"./graphics/canvas\";\nimport CanvasItem from \"./graphics/item\";\nimport Input from \"./input\";\nimport { Vector2 } from \"./math\";\nimport State from \"./state\";\n\nclass Game\n{\n    static readonly Instance = new this()\n    #canvas: Canvas = new Canvas()\n    #input: Input = new Input()\n\n    get Canvas() { return this.#canvas }\n    get Input() { return this.#input }\n\n    #handle: number = NaN\n\n    #lastTime: number = 0\n    #currentTime: number = 0\n\n    currentState?: State = new State.Test()\n\n    showFps: boolean = false\n    private constructor()\n    {\n        Object.defineProperty(window,\"game\",{value: this,writable: false})\n    }\n\n    get time() { return this.#currentTime - this.#lastTime }\n    get delta() { return this.time / 1000 }\n    get fps() { return 1 / this.delta }\n    start()\n    {\n        this.#canvas.element.focus()\n        this.#handle = requestAnimationFrame((time) => this.#loop(time))\n    }\n    stop()\n    {\n        cancelAnimationFrame(this.#handle)\n    }\n    restart()\n    {\n        this.stop()\n        this.start()\n    }\n    #loop(time: number)\n    {\n        this.#lastTime = this.#currentTime\n        this.#currentTime = time\n\n        this.#input.update()\n        this.#update()\n\n        this.#handle = requestAnimationFrame((time) => this.#loop(time))\n    }\n    #update()\n    {\n        if(this.currentState)\n        {\n            const state = this.currentState\n\n            state.input(this)\n            state.update(this)\n            state.draw(this)\n            if(this.showFps)\n            {\n                document.title = `FPS: ${this.fps | 0}`\n            }\n        }\n    }\n}\n\nexport default Game","import { createBBos } from \"../math\"\nimport CanvasItem from \"./item\"\n\nfunction getCanvas()\n{\n    const canvas = document.createElement(\"canvas\")\n\n    canvas.id = \"iGEM-game-canvas\"\n    canvas.tabIndex = 0\n\n    canvas.width = Canvas.WIDTH\n    canvas.height = Canvas.HEIGHT\n\n    canvas.style.inset = \"0\"\n    canvas.style.height = \"100%\",canvas.style.width = \"auto\"\n    canvas.style.imageRendering = \"pixelated\"\n    canvas.style.backgroundColor = \"white\"\n    canvas.style.outline = \"none\"\n\n    return canvas\n}\n\nfunction getContainer()\n{\n    const div = document.createElement(\"div\")\n\n    div.id = \"iGEM-game-container\"\n\n    div.style.position = \"fixed\"\n    div.style.inset = \"0\"\n    div.style.width = \"100%\"\n    div.style.height = \"100%\"\n    div.style.textAlign = \"center\"\n    div.style.backgroundColor = \"black\"\n    div.style.imageRendering = \"pixelated\"\n    div.style.outline = \"none\"\n\n    return div\n}\n\nfunction getContext(html: HTMLCanvasElement)\n{\n    const context = html.getContext(\"2d\")\n    if(context == null) throw new Error(\"2D Graphics are not available!\")\n\n    context.imageSmoothingEnabled = false\n\n    return context\n}\n\nclass Canvas\n{\n    #div = getContainer()\n    #canvas = getCanvas()\n    #context = getContext(this.#canvas)\n    drawHitbox: boolean = false\n    get element() { return this.#canvas }\n    get container() { return this.#div }\n    constructor()\n    {\n        this.#div.append(this.#canvas)\n\n        document.body.appendChild(this.#div)\n    }\n    draw(...items: CanvasItem[])\n    {\n        for(const item of items)\n        {\n            if(!Canvas.inside(item)) continue\n            item.draw(this.#context)\n            if(this.drawHitbox) item.drawHitbox(this.#context)\n        }\n    }\n    clear()\n    {\n        this.#context.clearRect(0,0,Canvas.WIDTH,Canvas.HEIGHT)\n    }\n}\n\nnamespace Canvas\n{\n    export const WIDTH = 320\n    export const HEIGHT = 200\n\n    export function inside(item: CanvasItem)\n    {\n        const left = -item.rect.width\n        const right = WIDTH + item.rect.width\n        const top = -item.rect.height\n        const bottom = HEIGHT + item.rect.height\n\n        const bbox = createBBos(item.rect)\n\n        return left < bbox.left && right > bbox.right &&\n               top < bbox.top && bottom > bbox.bottom\n    }\n}\n\nexport default Canvas","import { Rect, Size, Vector2 } from \"../math\";\n\nabstract class CanvasItem\n{\n    origin: Vector2\n    rotation: number = 0\n    set rotationDeg(val) {this.rotation = val * Math.PI/180}\n    get rotationDeg() {return this.rotation * 180/Math.PI}\n    static HITBOX_COLOR = \"red\"\n    constructor(readonly rect: Rect)\n    {\n        this.origin = Vector2(rect.width/2,rect.height/2)\n    }\n    abstract draw(context: CanvasRenderingContext2D): void\n    rotate(context: CanvasRenderingContext2D)\n    {\n        context.translate(this.rect.x+this.origin.x | 0,this.rect.y+this.origin.y | 0)\n        context.rotate(this.rotation | 0)\n        context.translate((this.rect.x+this.origin.x | 0)*-1,(this.rect.y+this.origin.y | 0)*-1)\n    }\n    drawHitbox(context: CanvasRenderingContext2D)\n    {\n        context.save()\n\n        this.rotate(context)\n\n        context.strokeStyle = CanvasItem.HITBOX_COLOR\n        context.strokeRect(this.rect.x | 0,this.rect.y | 0,this.rect.width | 0,this.rect.height | 0)\n\n        context.restore()\n    }\n}\n\nnamespace CanvasItem\n{\n    export type ModeStyle = {\n        \"fill\": CanvasRenderingContext2D[\"fillStyle\"]\n        \"stroke\": CanvasRenderingContext2D[\"strokeStyle\"]\n    }\n\n    export class Rectangle<M extends keyof ModeStyle = \"fill\"> extends CanvasItem\n    {\n        constructor(rect: Rect,readonly style: ModeStyle[M] = \"black\",readonly mode: M = \"fill\" as M)\n        {\n            super(rect)\n        }\n        draw(context: CanvasRenderingContext2D) \n        {\n            context.save()\n\n            this.rotate(context)\n\n            context[`${this.mode}Style`] = this.style\n            context[`${this.mode}Rect`](this.rect.x | 0,this.rect.y | 0,this.rect.width | 0,this.rect.height | 0)\n            \n            context.restore()\n        }\n    }\n    export class Image extends CanvasItem\n    {\n        static getSize(image: CanvasImageSource): Size\n        {\n            const width = typeof image.width == \"number\" ? image.width : image.width.baseVal.value\n            const height = typeof image.height == \"number\" ? image.height : image.height.baseVal.value\n\n            return {width,height}\n        }\n        constructor(readonly image: CanvasImageSource,pos: Vector2,readonly source: Rect = {...Image.getSize(image),x: 0,y: 0},size: Size = Image.getSize(image))\n        {\n            super({\n                ...pos,...size\n            })\n        }\n        draw(context: CanvasRenderingContext2D)\n        {\n            context.save()\n\n            this.rotate(context)\n\n            context.drawImage(this.image,\n                this.source.x | 0,this.source.y | 0,this.source.width | 0,this.source.height | 0,\n                this.rect.x | 0,this.rect.y | 0,this.rect.width | 0,this.rect.height | 0)\n\n            context.restore()\n        }\n    }\n    export class Text<M extends keyof ModeStyle = \"fill\"> extends CanvasItem\n    {\n        constructor(pos: Vector2,readonly text: string,readonly font: string = \"monospace\",height: number = 11,readonly mode: M = \"fill\" as M)\n        {\n            super({...pos,width: 0,height})\n        }\n        draw(context: CanvasRenderingContext2D): void \n        {\n            const m = context.measureText(this.text)\n            this.rect.width = m.width\n\n            context.save()\n\n            this.rotate(context)\n\n            context.font = `${this.rect.height}px ${this.font}`\n            context[`${this.mode}Text`](this.text,this.rect.x | 0,this.rect.y | 0,this.rect.width | 0)\n\n            context.restore()\n        }\n    }\n}\n\nexport default CanvasItem","import { Vector2 } from \"./math\"\n\nclass Input\n{\n    keyboard: Input.Keyboard = {}\n    mouse: Input.Mouse = [false,false,false,false,false]\n    mousePos: Vector2 = {x: 0,y: 0}\n    gamepads: ReturnType<Navigator[\"getGamepads\"]> = []\n    constructor()\n    {\n        window.addEventListener(\"keydown\",(ev) =>\n        {\n            ev.preventDefault()\n            this.keyboard[ev.key.toLowerCase()] = true\n        })\n        window.addEventListener(\"keyup\",(ev) =>\n        {\n            ev.preventDefault()\n            this.keyboard[ev.key.toLowerCase()] = false\n        })\n        window.addEventListener(\"keypress\",(ev) =>\n        {\n            ev.preventDefault()\n            this.keyboard[ev.key.toLowerCase()] = true\n        })\n        window.addEventListener(\"mousedown\",(ev) =>\n        {\n            ev.preventDefault()\n            this.mouse[ev.button] = true\n        })\n        window.addEventListener(\"mouseup\",(ev) =>\n        {\n            ev.preventDefault()\n            this.mouse[ev.button] = false\n        })\n        window.addEventListener(\"mousemove\",(ev) =>\n        {\n            ev.preventDefault()\n            this.mousePos = {x: ev.x,y: ev.y}\n        })\n        window.addEventListener(\"contextmenu\",(ev) => ev.preventDefault())\n    }\n    update()\n    {\n        this.gamepads = navigator.getGamepads()\n    }\n}\n\nnamespace Input \n{\n    export type Keyboard = {[key: string]: boolean}\n    export type Mouse = [boolean,boolean,boolean,boolean,boolean]\n\n    export enum MouseButton\n    {\n        Main,\n        Auxiliary,\n        Secondary,\n        Back,\n        Forward,\n        Count\n    }\n}\n\nexport default Input","export type Vector2 = {\n    x: number\n    y: number\n}\nexport function Vector2(x: number,y: number): Vector2\n{\n    return {x,y}\n}\nexport type Size = {\n    width: number\n    height: number\n}\nexport function Size(width: number,height: number): Size\n{\n    return {width,height}\n}\nexport type Rect = Vector2 & Size\nexport function Rect(x: number,y: number,width: number,height: number): Rect\n{\n    return {x,y,width,height}\n}\n\nexport type BBox = {\n    left: number\n    right: number\n    top: number\n    bottom: number\n}\n\nexport function createBBos(rect: Rect): BBox\n{\n    return {\n        left: rect.x,right: rect.x + rect.width,\n        top: rect.y,bottom: rect.y + rect.height\n    }\n}","import Game from \"./game\";\nimport CanvasItem from \"./graphics/item\";\nimport { Vector2 } from \"./math\";\n\nabstract class State\n{\n    abstract update(game: Game): void\n    abstract input(game: Game): void\n    abstract draw(game: Game): void\n}\n\nnamespace State\n{\n    export class Test extends State\n    {\n        speed = 200\n        rotation = 0\n        pos: Vector2 = Vector2(0,0)\n\n        down = false\n        up = false\n        left = false\n        right = false\n\n        rotUp = false\n        rotDown = false\n        update(game: Game): void \n        {\n            if(this.up) this.pos.y -= game.delta * this.speed\n            if(this.down) this.pos.y += game.delta * this.speed\n            if(this.left) this.pos.x -= game.delta * this.speed\n            if(this.right) this.pos.x += game.delta * this.speed\n\n            if(this.rotDown) this.rotation -= game.delta * 5\n            if(this.rotUp) this.rotation += game.delta * 5\n        }\n        input(game: Game): void \n        {\n            this.down = game.Input.keyboard[\"arrowdown\"]\n            this.up = game.Input.keyboard[\"arrowup\"]\n            this.left = game.Input.keyboard[\"arrowleft\"]\n            this.right = game.Input.keyboard[\"arrowright\"]\n\n            this.rotDown = game.Input.keyboard[\"q\"]\n            this.rotUp = game.Input.keyboard[\"e\"]\n        }\n        draw(game: Game): void \n        {\n            game.Canvas.clear()\n\n            const item = new CanvasItem.Rectangle({width: 30,height: 30,...this.pos},\"red\",\"fill\")\n            item.rotationDeg = this.rotation\n\n            game.Canvas.draw(item)\n        }\n    }\n}\n\nexport default State"],"names":["Canvas","Input","State","Game","NaN","Test","Object","defineProperty","window","value","writable","time","delta","element","focus","requestAnimationFrame","cancelAnimationFrame","stop","start","update","currentState","state","input","draw","showFps","document","title","fps","createBBos","getCanvas","canvas","createElement","id","tabIndex","width","WIDTH","height","HEIGHT","style","inset","imageRendering","backgroundColor","outline","getContainer","div","position","textAlign","getContext","html","context","Error","imageSmoothingEnabled","append","body","appendChild","items","item","inside","drawHitbox","clearRect","left","rect","right","top","bottom","bbox","Vector2","CanvasItem","origin","rotation","Math","PI","val","translate","x","y","rotate","save","strokeStyle","HITBOX_COLOR","strokeRect","restore","Rectangle","mode","Image","image","pos","source","getSize","size","drawImage","baseVal","Text","text","font","m","measureText","addEventListener","ev","preventDefault","keyboard","key","toLowerCase","mouse","button","mousePos","gamepads","navigator","getGamepads","MouseButton","Size","Rect","game","up","speed","down","rotDown","rotUp","clear","rotationDeg"],"sourceRoot":""}